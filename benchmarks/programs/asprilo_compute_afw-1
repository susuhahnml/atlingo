#!/bin/bash


ROOT="$1""/"
INSTANCE=$2
HORIZON=$3
MODELS=$4
LOGIC=$5
CLINGO_ARGS=$7
: ${CLINGO_ARGS:=''}


PATH_FROM_DFA_TO_ROOT="benchmarks/benchmark-tool/"
PATH_FROM_ROOT_TO_DFA="../../"
TOTAL_PATH_AAE="$HOME/temporal-automata/atlingo/env/asprilo/asprilo-abstraction-encodings"
PATH_CONVERT_M_TO_MD="$TOTAL_PATH_AAE/asprilo/misc/augment-m-to-md.lp"
PATH_ENCODING_M_1="$TOTAL_PATH_AAE/encodings/torsten/md/action-MD.lp"
PATH_ENCODING_M_2="$TOTAL_PATH_AAE/encodings/torsten/md/goal-MD.lp"
PATH_ENCODING_M_3="$TOTAL_PATH_AAE/encodings/torsten/md/output-M.lp"
PATH_ENCODING_M="$PATH_ENCODING_M_1 ""$PATH_ENCODING_M_2 ""$PATH_ENCODING_M_3"



INSTANCE=${INSTANCE#"$ROOT"}
INSTANCE=${INSTANCE#"$PATH_FROM_ROOT_TO_DFA"}
INSTANCE=${PATH_FROM_DFA_TO_ROOT}${INSTANCE}
CONSTRAINT=$6
CONSTRAINT_NAME=$(basename "$CONSTRAINT")
ARGS="-q "$CLINGO_ARGS
COMMAND="	( cd $ROOT ; cd $PATH_FROM_ROOT_TO_DFA ; make translate-run ENV_APP=asprilo INSTANCE=$INSTANCE CONSTRAINT=$CONSTRAINT_NAME HORIZON=$HORIZON MODELS=$MODELS RUN_FILES=$ARGS LOGIC=$LOGIC; make stats INSTANCE=$INSTANCE CONSTRAINT=$CONSTRAINT_NAME LOGIC=$LOGIC)"
echo $COMMAND
( cd $ROOT ; cd $PATH_FROM_ROOT_TO_DFA ; make translate-run ENV_APP=asprilo INSTANCE=$INSTANCE CONSTRAINT=$CONSTRAINT_NAME HORIZON=$HORIZON MODELS=$MODELS RUN_FILES="$ARGS" LOGIC=$LOGIC)

