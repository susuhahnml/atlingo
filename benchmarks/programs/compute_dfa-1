#!/bin/bash


HERE=$(pwd)"/"

ROOT="$1""/"
INSTANCE=$2
HORIZON=$3
MODELS=$4
MODE=$5
CLINGO_ARGS=$8
: ${CLINGO_ARGS:=''}

TOTAL_PATH_DFA_ROOT="$HOME/temporal-automata/stage_asp_gitlab"
TOTAL_PATH_DFA_BT="$TOTAL_PATH_DFA_ROOT/tools/benchmark-tool/"
TOTAL_PATH_AFW="$HOME/temporal-automata/atlingo/benchmarks"
PATH_FROM_DFA_TO_ROOT="tools/benchmark-tool/"
PATH_FROM_ROOT_TO_DFA="../../"

INSTANCE_NAME=$(basename "$INSTANCE")
INSTANCE=${INSTANCE#"$ROOT.."}
INSTANCE=$TOTAL_PATH_AFW$INSTANCE


CONSTRAINT=$TOTAL_PATH_DFA_BT$6
BONUS_FILE=$TOTAL_PATH_DFA_BT$7
CLINGOARGS='-q '${CLINGO_ARGS}
cd $TOTAL_PATH_DFA_ROOT

if [ $MODE -eq 6 ]
then
	( make asprilo-transform INSTANCE=$INSTANCE H=$HORIZON MODELS=$MODELS CONSTRAINT=$CONSTRAINT BONUS_FILE=$BONUS_FILE VERSION=1 CLINGOARGS="'$CLINGOARGS'")
elif [ $MODE -eq 7 ]
then 
	( make asprilo-transform INSTANCE=$INSTANCE H=$HORIZON MODELS=$MODELS CONSTRAINT=$CONSTRAINT BONUS_FILE=$BONUS_FILE VERSION=2 CLINGOARGS="'$CLINGOARGS'")
else	
	( make asprilo-dfa INSTANCE=$INSTANCE H=$HORIZON MODELS=$MODELS CONSTRAINT=$CONSTRAINT BONUS_FILE=$BONUS_FILE MODE=$MODE CLINGOARGS="'$CLINGOARGS'")
fi

